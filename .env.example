# =============================================================================
# BARQ Fleet Management - Environment Configuration Template
# =============================================================================
# Copy this file to .env and update with your environment-specific values
# For production, use .env.production with production values
# Generate secure keys: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
PROJECT_NAME="BARQ Fleet Management"
VERSION="1.1.0"
API_V1_STR="/api/v1"
ENVIRONMENT=development  # Options: development, staging, production
DEBUG=true
LOG_LEVEL=DEBUG  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # Options: json, text

# -----------------------------------------------------------------------------
# Security - IMPORTANT: Change these in production!
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days for development

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_LENGTH=128
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL=true

# Brute Force Protection
BRUTE_FORCE_MAX_ATTEMPTS=5
BRUTE_FORCE_LOCKOUT_MINUTES=15

# -----------------------------------------------------------------------------
# CORS Settings
# -----------------------------------------------------------------------------
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080
CORS_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Option 1: Individual parameters
POSTGRES_SERVER=localhost
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=barq_fleet
POSTGRES_PORT=5432

# Option 2: Direct connection URL (takes precedence if set)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/barq_fleet

# Connection Pool Settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800
DB_QUERY_TIMEOUT=30000
DB_ECHO=false  # Enable SQL query logging

# Read Replicas (Optional - Production)
DB_READ_REPLICAS_ENABLED=false
# DB_READ_REPLICA_URLS=postgresql://user:pass@replica1:5432/db,postgresql://user:pass@replica2:5432/db

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECT_TIMEOUT=5

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
CACHE_DEFAULT_TTL=300
CACHE_USER_TTL=600
CACHE_ORG_TTL=1800
CACHE_STATIC_TTL=3600
CACHE_WARMING_ENABLED=false
MEMORY_CACHE_SIZE=500
MEMORY_CACHE_TTL=60

# -----------------------------------------------------------------------------
# Celery (Background Tasks)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_WORKER_CONCURRENCY=4
CELERY_PREFETCH_MULTIPLIER=4
CELERY_SOFT_TIME_LIMIT=300
CELERY_TIME_LIMIT=600
CELERY_MAX_RETRIES=3
CELERY_RETRY_DELAY=60
CELERY_RESULT_EXPIRES=3600

# -----------------------------------------------------------------------------
# API Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
MAX_CONCURRENT_REQUESTS=100
API_CACHE_TTL=60

# -----------------------------------------------------------------------------
# Google OAuth 2.0 (Optional)
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/google/callback

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
EMAIL_ENABLED=false
EMAIL_FROM=noreply@barqfleet.com
EMAIL_FROM_NAME="BARQ Fleet Management"
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_TLS=true
SMTP_SSL=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# -----------------------------------------------------------------------------
# SMS Configuration (Twilio)
# -----------------------------------------------------------------------------
SMS_ENABLED=false
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# File Storage
# -----------------------------------------------------------------------------
FILE_STORAGE_TYPE=local  # Options: local, s3, gcs
FILE_UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=.pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx

# AWS S3 (if FILE_STORAGE_TYPE=s3)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=barq-fleet-files
# AWS_S3_REGION=us-east-1

# Google Cloud Storage (if FILE_STORAGE_TYPE=gcs)
# GCS_BUCKET=barq-fleet-files
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Sentry Error Tracking
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Metrics
METRICS_ENABLED=false
METRICS_PORT=9090

# Profiling
PROFILING_ENABLED=false
LOG_QUERIES=false
LOG_SLOW_QUERIES_ONLY=true
SLOW_QUERY_THRESHOLD=0.1

# -----------------------------------------------------------------------------
# Health Check Thresholds
# -----------------------------------------------------------------------------
HEALTH_CHECK_INTERVAL=30
API_RESPONSE_P95_MS=200
DB_QUERY_AVG_MS=50
CACHE_HIT_RATIO_MIN=0.80
CPU_USAGE_MAX=0.70
MEMORY_USAGE_MAX=0.80
MAX_ERROR_RATE=0.01

# -----------------------------------------------------------------------------
# FMS Integration (machinettalk Fleet Management System)
# -----------------------------------------------------------------------------
FMS_BASE_URL=http://localhost:3003
FMS_USERNAME=
FMS_PASSWORD=
FMS_API_KEY=
FMS_TIMEOUT=30

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
VITE_API_URL=http://localhost:8000/api/v1
VITE_APP_NAME="BARQ Fleet Management"
VITE_ENABLE_ANALYTICS=false
VITE_GOOGLE_MAPS_API_KEY=

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_GOOGLE_AUTH=true
FEATURE_SMS_NOTIFICATIONS=false
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_ANALYTICS=false
FEATURE_WORKFLOW_ENGINE=true
FEATURE_SUPPORT_MODULE=true

# -----------------------------------------------------------------------------
# Test Configuration
# -----------------------------------------------------------------------------
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/barq_fleet_test
