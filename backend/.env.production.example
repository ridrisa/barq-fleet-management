# BARQ Fleet Management - Production Environment Configuration
# Copy this file to .env.production and update with your production values

# Environment
ENVIRONMENT=production
DEBUG=false

# Database Configuration
DATABASE_URL=postgresql://barq_user:${DB_PASSWORD}@prod-db:5432/barq_fleet
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_QUERY_TIMEOUT=30000
DB_ECHO=false

# Read Replicas (optional but recommended)
DB_READ_REPLICAS_ENABLED=true
DB_READ_REPLICA_URLS=postgresql://barq_user:${DB_PASSWORD}@replica-1:5432/barq_fleet,postgresql://barq_user:${DB_PASSWORD}@replica-2:5432/barq_fleet

# Redis Configuration
REDIS_URL=redis://:${REDIS_PASSWORD}@prod-redis:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECT_TIMEOUT=5

# Cache Configuration
CACHE_DEFAULT_TTL=300
CACHE_USER_TTL=600
CACHE_ORG_TTL=1800
CACHE_STATIC_TTL=3600
CACHE_WARMING_ENABLED=true
MEMORY_CACHE_SIZE=1000
MEMORY_CACHE_TTL=60

# Celery Configuration
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@prod-redis:6379/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@prod-redis:6379/2
CELERY_WORKER_CONCURRENCY=8
CELERY_PREFETCH_MULTIPLIER=4
CELERY_SOFT_TIME_LIMIT=300
CELERY_TIME_LIMIT=600
CELERY_MAX_RETRIES=3
CELERY_RETRY_DELAY=60
CELERY_RESULT_EXPIRES=3600

# API Configuration
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
MAX_CONCURRENT_REQUESTS=1000
API_CACHE_TTL=60

# Security
SECRET_KEY=${SECRET_KEY}
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS
CORS_ORIGINS=https://app.barqfleet.com,https://www.barqfleet.com
CORS_CREDENTIALS=true

# File Handling
FILE_CHUNK_SIZE=8192
MAX_FILE_SIZE=10485760
STREAM_BUFFER_SIZE=65536

# CDN (optional)
CDN_ENABLED=false
CDN_URL=https://cdn.barqfleet.com
CDN_ACCESS_KEY=${CDN_ACCESS_KEY}
CDN_SECRET_KEY=${CDN_SECRET_KEY}

# Monitoring & Profiling
PROFILING_ENABLED=false
LOG_QUERIES=false
LOG_SLOW_QUERIES_ONLY=true
SLOW_QUERY_THRESHOLD=0.1
MEMORY_PROFILING_ENABLED=false

# Email Configuration (for background tasks)
EMAIL_FROM=noreply@barqfleet.com
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}

# External Services
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Performance Thresholds
API_RESPONSE_P95_MS=200
DB_QUERY_AVG_MS=50
CACHE_HIT_RATIO_MIN=0.80
CPU_USAGE_MAX=0.70
MEMORY_USAGE_MAX=0.80
MAX_ERROR_RATE=0.01

# Health Check
HEALTH_CHECK_INTERVAL=30

# Object Pool
OBJECT_POOL_SIZE=100
LARGE_OBJECT_THRESHOLD=1048576

# Garbage Collection Tuning
GC_THRESHOLD_0=700
GC_THRESHOLD_1=10
GC_THRESHOLD_2=10
